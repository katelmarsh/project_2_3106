---
title: "Scratch work" 
output: pdf_document
---

## R Markdown


# Some code taken from Ding Zhou's 2/27/20 Homework 7 Solution for Applied Stat Computing 

```{r}

sample_data <- read_json("~/Downloads/indeed_job_descs_2020_09_20.json")
job_descriptions_list <- c()
for (ii in seq_len(length(sample_data$job_descriptions))){
  job_descriptions_list[ii] <- sample_data$job_descriptions[[ii]]
}

split_job_description <- function(job_descriptions_entry){
  transform_dat <- gsub("[^[:alnum:]_]", " ", job_descriptions_entry)
  # an alternative solution would be gsub("[^a-zA-Z0-9_]", " ", job_descriptions_entry)
  transform_dat <- strsplit(transform_dat, split=" ")[[1]]
  transform_dat <- transform_dat[transform_dat!=""]
  return(transform_dat)
}

job_descriptions_list <- lapply(sample_data$job_descriptions, split_job_description)

```



```{r}
library(plyr)

create_count_tab <- function(job_descriptions_entry){
  job_descriptions_entry <- tolower(job_descriptions_entry)
  tmp <- as.data.frame(table(job_descriptions_entry))
  mydf <- as.data.frame(t(tmp$Freq))
  colnames(mydf) <- tmp$job_descriptions_entry
  return(mydf)
}

count_tab_list <- lapply(job_descriptions_list, create_count_tab)

count_tab_all <- do.call(rbind.fill, count_tab_list)

```

```{r}
count_tab_all_list <- c()
file_name_list <- list.files(path='~/Downloads/indeed_job_descs_2020_09_20.json')

for (jj in seq_len(length(file_name_list))){
  sample_data <- read_json(paste('~/Downloads/indeed_job_descs_2020_09_20.json',file_name_list[jj], sep =''))
  count_tab_list <- c()
  for (ii in seq_len(length(sample_data$job_descriptions))){
    job_descriptions_entry <- split_job_description(sample_data$job_descriptions[[ii]])
    count_tab_list[[ii]] <- create_count_tab(job_descriptions_entry)
  }
  count_tab_all_list[[jj]] <- do.call(rbind.fill, count_tab_list)
}

count_tab_all <- do.call(rbind.fill, count_tab_all_list)

``